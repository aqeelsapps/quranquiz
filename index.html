<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Qur'an Trivia ‚Äì 100 Questions</title>
  <meta name="description" content="Child‚Äëfriendly multiple‚Äëchoice Qur'an quiz (100 questions) with instant feedback and final score." />
  <style>
    :root{
      --bg:#f9fafb; /* light */
      --card:#ffffff;
      --text:#111827; /* slate-900 */
      --sub:#4b5563; /* slate-600 */
      --brand:#2563eb; /* blue-600 */
      --brand-2:#22c55e; /* green-500 */
      --muted:#e5e7eb; /* slate-200 */
      --wrong:#ef4444; /* red-500 */
      --right:#16a34a; /* green-600 */
      --shadow: 0 10px 25px rgba(0,0,0,.08);
      --radius: 18px;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";}
    .wrap{max-width:960px;margin:0 auto;padding:20px 16px 60px;}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;}
    .title{font-size: clamp(22px, 4vw, 34px);font-weight:800;letter-spacing:.2px;margin:0;}
    .subtitle{margin:.4rem 0 1rem;color:var(--sub);}
    .progress{height:12px;background:var(--muted);border-radius:999px;overflow:hidden}
    .bar{height:100%;background:linear-gradient(90deg,var(--brand),#7c3aed);width:0%;transition:width .5s ease}
    .qno{font-weight:700;opacity:.85;margin-bottom:8px}
    .question{font-size: clamp(18px, 3.4vw, 24px);font-weight:700;line-height:1.25;margin:10px 0 14px}
    .choices{display:grid;gap:10px}
    @media(min-width:640px){.choices{grid-template-columns:1fr 1fr}}
    .choice{border:2px solid var(--muted);background:#fff;border-radius:16px;padding:14px 16px;display:flex;gap:12px;align-items:center;cursor:pointer;transition:transform .06s ease, border-color .2s ease, box-shadow .2s ease}
    .choice:hover{transform:translateY(-1px);box-shadow:0 10px 16px rgba(0,0,0,.06)}
    .label{font-weight:800;min-width:28px;height:28px;display:grid;place-items:center;border-radius:10px;background:var(--muted)}
    .choice.correct{border-color:var(--right);}
    .choice.wrong{border-color:var(--wrong);}
    .choice.disabled{opacity:.75;cursor:not-allowed}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;font-weight:800;margin:8px 0}
    .badge.right{background:rgba(22,163,74,.1);color:var(--right)}
    .badge.wrong{background:rgba(239,68,68,.1);color:var(--wrong)}
    .answerline{margin-top:8px;color:#065f46;font-weight:700}
    .ref{color:var(--sub);font-size:14px;margin-top:4px}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .btn{background:var(--text);color:#fff;border:none;border-radius:14px;padding:12px 16px;font-weight:800;cursor:pointer;box-shadow:var(--shadow);}
    .btn:disabled{opacity:.4;cursor:not-allowed}
    .btn.primary{background:var(--brand)}
    .btn.ghost{background:#fff;border:2px solid var(--muted);color:var(--text)}
    .btn.success{background:var(--brand-2)}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:2px dashed var(--muted);}
    .footer{margin-top:14px;color:var(--sub);font-size:13px}
    .score{font-size: clamp(24px,4vw,42px);font-weight:900;margin:8px 0}
    .grid{display:grid;gap:12px}
    .review{border-left:6px solid var(--muted);padding-left:12px}
    .correctText{color:var(--right)}
    .wrongText{color:var(--wrong)}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .tiny{font-size:12px;color:var(--sub)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="topbar">
        <div>
          <h1 class="title">Qur'an Trivia</h1>
          <div class="subtitle">100 multiple‚Äëchoice questions ‚Ä¢ child‚Äëfriendly ‚Ä¢ instant feedback</div>
        </div>
        <button class="btn ghost" id="resetBtn" aria-label="Reset quiz">‚Ü∫ Reset</button>
      </div>
      <div class="progress" aria-label="Progress"><div class="bar" id="bar"></div></div>
      <div class="pill" style="margin-top:12px" id="pill">
        <span id="progressText">Question 1 / 100</span>
      </div>

      <div id="quiz" style="margin-top:14px"></div>

      <div class="footer">Tip: Big, friendly buttons for little thumbs üòä Works offline after first load. Your progress is saved on this device.</div>
    </div>
  </div>

<script>
// --- Data: 100 questions ---
// Each item: {q, options[4], answer (0-3), ref}
const QUESTIONS = [
  {q:"How many surahs are in the Holy Qur‚Äôan?", options:["110","112","114","116"], answer:2, ref:""},
  {q:"Into how many equal parts (juz‚Äô) is the Qur‚Äôan divided for recitation?", options:["7","15","30","60"], answer:2, ref:""},
  {q:"What is the language of the Qur‚Äôan?", options:["Classical Arabic","Syriac","Aramaic","Hebrew"], answer:0, ref:""},
  {q:"Which surah is recited in every rak‚Äòah of the formal prayer (salat)?", options:["Al-Ikhlas","Al-Fatihah","Al-Kafirun","Al-Nas"], answer:1, ref:""},
  {q:"Which surah is the longest in the Qur‚Äôan?", options:["Al-Imran","Al-Baqarah","Al-A‚Äòraf","Al-Nisa"], answer:1, ref:""},
  {q:"Which surah is the shortest in the Qur‚Äôan?", options:["Al-Kawthar","Al-‚ÄòAsr","Al-Nasr","Al-Qadr"], answer:0, ref:""},
  {q:"Which verses were revealed first to the Holy Prophet Muhammad (sa)?", options:["Al-Fatihah","Al-Qadr","Al-‚ÄòAlaq 96:1-5","Al-Mudaththir 74:1-7"], answer:2, ref:""},
  {q:"What title is given to the Prophet Muhammad (sa) in Qur‚Äôan 33:40?", options:["Rahmatan lil-‚ÄòAlamin","Khatam al-Nabiyyin","Siraj-an Munira","Nabi-yullah"], answer:1, ref:"33:40"},
  {q:"Which surah does not begin with ‚ÄòBismillahir-Rahmanir-Rahim‚Äô?", options:["At-Tawbah (9)","Yunus (10)","Hud (11)","Yusuf (12)"], answer:0, ref:""},
  {q:"How many times does the name ‚ÄòMuhammad‚Äô appear in the Qur‚Äôan?", options:["2","3","4","5"], answer:2, ref:""},
  {q:"In which surah does the name ‚ÄòAhmad‚Äô appear?", options:["Al-Imran","Al-Ahzab","As-Saff","Al-Jumu‚Äòah"], answer:2, ref:"61:6"},
  {q:"Which surah is named after Mary, the mother of Jesus (as)?", options:["Al-Imran","Maryam","An-Nisa","At-Tahrim"], answer:1, ref:"19"},
  {q:"Which surah is also called Bani Isra‚Äôil?", options:["Al-Isra (17)","Al-Ankabut (29)","Al-Qasas (28)","Al-An‚Äòam (6)"], answer:0, ref:"17"},
  {q:"Which surah contains Ayat al-Kursi?", options:["Al-Baqarah 2:255","Al-Imran 3:18","An-Nisa 4:136","Al-A‚Äòraf 7:54"], answer:0, ref:"2:255"},
  {q:"Which surah contains the Verse of Light (Ayat an-Nur)?", options:["Al-Ahzab 33:56","An-Nur 24:35","Al-Mulk 67:1","Ar-Rahman 55:13"], answer:1, ref:"24:35"},
  {q:"Which surah tells the story of the People of the Cave?", options:["Yusuf","Maryam","Al-Kahf","Taha"], answer:2, ref:"18"},
  {q:"In which surah is Dhu‚Äôl-Qarnayn mentioned?", options:["Al-Anbiya","Al-Kahf","Yasin","Az-Zukhruf"], answer:1, ref:"18"},
  {q:"Which surah tells the story of Prophet Joseph (Yusuf) in a continuous narrative?", options:["Hud","Yusuf","Yunus","Ibrahim"], answer:1, ref:"12"},
  {q:"Which surah contains the command to face the Ka‚Äòbah (change of qiblah)?", options:["Al-Baqarah 2:144","Al-Imran 3:95","An-Nisa 4:103","Al-Ma‚Äôidah 5:6"], answer:0, ref:"2:144"},
  {q:"What is the usual classification of surahs by place of revelation?", options:["Makki and Madani","Eastern and Western","Northern and Southern","First and Last"], answer:0, ref:""},
  {q:"How many Makki and Madani surahs are commonly counted?", options:["90 Makki / 24 Madani","86 Makki / 28 Madani","80 Makki / 34 Madani","70 Makki / 44 Madani"], answer:1, ref:""},
  {q:"Over approximately how many years was the Qur‚Äôan revealed?", options:["10","20","23","30"], answer:2, ref:""},
  {q:"Which surah condemns cheating in weights and measures?", options:["Al-Hujurat","Al-Mutaffifin","At-Tin","Al-Ma‚Äòun"], answer:1, ref:"83"},
  {q:"Which surah emphasises time and the human condition in three short verses?", options:["Al-‚ÄòAsr","Al-Qadr","Al-Kawthar","Al-Nasr"], answer:0, ref:"103"},
  {q:"Which surah begins with ‚ÄòBy the Dawn‚Äô?", options:["Al-Fajr","Ad-Duha","Ash-Shams","Al-Layl"], answer:0, ref:"89"},
  {q:"Which surah begins with ‚ÄòBy the bright morning hours‚Äô?", options:["Ash-Shams","Ad-Duha","Al-Qadr","Al-Balad"], answer:1, ref:"93"},
  {q:"Which surah contains the repeated refrain ‚ÄòWhich, then, of the favours of your Lord will you two deny?‚Äô", options:["Ar-Rahman","Al-Qamar","Al-Buruj","Ad-Dukhan"], answer:0, ref:"55"},
  {q:"Which surah describes the Battle of the Confederates?", options:["Al-Anfal","At-Taubah","Al-Ahzab","Muhammad"], answer:2, ref:"33"},
  {q:"Which surah narrates the incident of the elephant?", options:["Quraish","Al-Fil","Al-Humazah","Al-‚ÄòAdiyat"], answer:1, ref:"105"},
  {q:"Which surah is named after Friday?", options:["Al-Ahzab","As-Saff","Al-Jumu‚Äòah","Al-Munafiqun"], answer:2, ref:"62"},
  {q:"Which surah is named after ‚Äòthe Bee‚Äô?", options:["Al-Nahl","An-Naml","Al-‚ÄòAnkabut","Al-An‚Äòam"], answer:0, ref:"16"},
  {q:"Which surah is named after ‚Äòthe Ant‚Äô?", options:["Al-Nahl","An-Naml","Al-‚ÄòAnkabut","Al-An‚Äòam"], answer:1, ref:"27"},
  {q:"Which surah is named after ‚Äòthe Spider‚Äô?", options:["Al-Nahl","An-Naml","Al-‚ÄòAnkabut","Al-An‚Äòam"], answer:2, ref:"29"},
  {q:"Which surah is named after ‚Äòthe Cattle‚Äô?", options:["Al-An‚Äòam","Al-Baqarah","Al-Fil","Al-‚ÄòAdiyat"], answer:0, ref:"6"},
  {q:"Which surah is named after ‚Äòthe Cow‚Äô?", options:["Al-Baqarah","Al-An‚Äòam","Al-Nahl","Al-Qasas"], answer:0, ref:"2"},
  {q:"Which surah begins with the oath ‚ÄòBy the Pen‚Äô?", options:["Al-‚ÄòAlaq","Al-Qadr","Al-Qalam","Al-‚ÄòAlaq and Al-Qalam"], answer:2, ref:"68:1"},
  {q:"How many surahs begin with disjointed letters (huruf-e-muqatta‚Äòat)?", options:["14","19","29","39"], answer:2, ref:""},
  {q:"Which of these begins with ‚ÄòAlif-Lam-Mim‚Äô?", options:["Yunus","Yusuf","Maryam","Al-Baqarah"], answer:3, ref:"2:1"},
  {q:"Which surah contains ‚ÄòThere is no compulsion in religion‚Äô?", options:["Al-Baqarah 2:256","An-Nisa 4:171","Al-Mumtahanah 60:8","Al-Kafirun 109:6"], answer:0, ref:"2:256"},
  {q:"Which surah contains the verse promising divine protection of the Qur‚Äôan?", options:["Yunus 10:64","Al-Hijr 15:9","An-Nur 24:35","Fussilat 41:42"], answer:1, ref:"15:9"},
  {q:"Which surah explicitly prohibits intoxicants and gambling?", options:["Al-Baqarah 2:219","An-Nisa 4:43","Al-Ma‚Äôidah 5:90-91","An-Nur 24:31"], answer:2, ref:"5:90-91"},
  {q:"Which surah details the recipients of Zakat (alms)?", options:["Al-Baqarah 2:177","Al-Ma‚Äôidah 5:3","At-Taubah 9:60","Al-Hajj 22:28"], answer:2, ref:"9:60"},
  {q:"Which surah contains: ‚ÄòObey Allah, obey the Messenger, and those in authority among you‚Äô?", options:["An-Nisa 4:59","Al-Ahzab 33:36","Al-Imran 3:32","Al-Hujurat 49:14"], answer:0, ref:"4:59"},
  {q:"Which surah speaks of the Night of Decree (Qadr)?", options:["Al-Qadr 97","Ad-Dukhan 44","Both A and B","Al-Fath 48"], answer:2, ref:"97, 44:3"},
  {q:"Which surah mentions that the Qur‚Äôan was sent down in Ramadan?", options:["Al-Baqarah 2:185","Al-Imran 3:190","Al-Qadr 97:1","Ad-Dukhan 44:3"], answer:0, ref:"2:185"},
  {q:"Which surah includes the prayer ‚ÄòRabbana atina fid-dunya hasanah‚Ä¶‚Äô?", options:["Al-Baqarah 2:201","Al-Imran 3:8","Ibrahim 14:40","Ghafir 40:60"], answer:0, ref:"2:201"},
  {q:"Which surah declares: ‚ÄòAnd We have indeed made the Qur‚Äôan easy to remember‚Äô?", options:["Al-Qamar 54:17","Al-Rahman 55:13","Al-Haqah 69:40","Al-Mudaththir 74:31"], answer:0, ref:"54:17"},
  {q:"Which surah contains ‚ÄòAllah is the Light of the heavens and the earth‚Äô?", options:["An-Nur 24:35","Al-Zumar 39:69","Al-Hadid 57:3","Al-Hashr 59:24"], answer:0, ref:"24:35"},
  {q:"Which surah contains the command: ‚ÄòAnd consult them in matters‚Äô?", options:["Al-Imran 3:159","Ash-Shura 42:38","Al-Nisa 4:58","Al-Anfal 8:61"], answer:0, ref:"3:159"},
  {q:"Which surah forbids backbiting, mockery and suspicion and declares believers to be brothers?", options:["Al-Nur 24","Al-Ahzab 33","Al-Hujurat 49","Al-Mumtahanah 60"], answer:2, ref:"49:10-12"},
  {q:"Which surah contains: ‚ÄòO mankind, We created you from a male and a female‚Ä¶‚Äô?", options:["Al-Nisa 4:1","Al-A‚Äòraf 7:26","Al-Hujurat 49:13","Ar-Rum 30:21"], answer:2, ref:"49:13"},
  {q:"Which surah promises the establishment of Khilafat for the believers (Ahmadiyya emphasis)?", options:["Al-Imran 3:104","An-Nur 24:55","Al-Ahzab 33:72","Al-Hashr 59:9"], answer:1, ref:"24:55"},
  {q:"Which surah records Jesus (as) prophesying a Messenger named ‚ÄòAhmad‚Äô?", options:["Maryam 19:30","Al-Ma‚Äôidah 5:75","As-Saff 61:6","Al-Hadid 57:27"], answer:2, ref:"61:6"},
  {q:"Which surah says: ‚ÄòMessiah, Jesus, son of Mary, was only a Messenger of Allah‚Ä¶ and His Word‚Ä¶ and a spirit from Him‚Äô?", options:["Al-Imran 3:45","An-Nisa 4:171","Maryam 19:34","Al-Ma‚Äôidah 5:110"], answer:1, ref:"4:171"},
  {q:"Which surah declares ‚ÄòThey killed him not, nor did they crucify him‚Äô regarding Jesus (as)?", options:["Al-Imran 3:55","An-Nisa 4:157","Al-Ma‚Äôidah 5:75","Maryam 19:33"], answer:1, ref:"4:157"},
  {q:"According to Ahmadiyya exegesis, the phrase mutawaffƒ´ka in 3:55 most correctly means:", options:["I will raise you bodily to the sky alive","I will cause you to die a natural death","I will make you sleep temporarily","I will hide you from your enemies"], answer:1, ref:"3:55"},
  {q:"Which surah states: ‚ÄòAnd He found you not following a way and made you find guidance‚Äô?", options:["Ad-Duha 93","Ash-Sharh 94","Al-‚ÄòAlaq 96","At-Tin 95"], answer:0, ref:"93:7"},
  {q:"Which surah ends with ‚ÄòFrom among jinn and men‚Äô?", options:["Al-Falaq 113","Al-Nas 114","Al-Ikhlas 112","Al-Kafirun 109"], answer:1, ref:"114:6"},
  {q:"Which surah begins with ‚ÄòSay, He is Allah, the One‚Äô?", options:["Al-Ikhlas","Al-Falaq","Al-Nas","Al-Kafirun"], answer:0, ref:"112:1"},
  {q:"Which surah begins with ‚ÄòSay, I seek refuge with the Lord of the dawn‚Äô?", options:["Al-Ikhlas","Al-Falaq","Al-Nas","Al-Kafirun"], answer:1, ref:"113:1"},
  {q:"Which surah begins with ‚ÄòSay, O disbelievers‚Äô?", options:["Al-Ikhlas","Al-Falaq","Al-Nas","Al-Kafirun"], answer:3, ref:"109:1"},
  {q:"Which surah contains the story of Qarun (Korah)?", options:["Al-Qasas 28","Al-A‚Äòraf 7","Yunus 10","Ghafir 40"], answer:0, ref:"28:76-82"},
  {q:"Which surah contains the slander incident and exoneration verses?", options:["Al-Ahzab 33","An-Nur 24","Al-Mujadilah 58","Al-Nisa 4"], answer:1, ref:"24:11-20"},
  {q:"Which surah commands veiling/modesty for believing women?", options:["An-Nur 24:31","Al-Ahzab 33:59","Both A and B","Al-Mumtahanah 60:12"], answer:2, ref:"24:31; 33:59"},
  {q:"Which surah contains the law of four witnesses for accusations of adultery?", options:["An-Nur 24:4","An-Nisa 4:15","Al-Ma‚Äôidah 5:5","Al-Ahzab 33:35"], answer:0, ref:"24:4"},
  {q:"Which surah contains the longest verse of the Qur‚Äôan about debt contracts?", options:["Al-Baqarah 2:282","Al-Imran 3:190","An-Nisa 4:176","Al-Ma‚Äôidah 5:8"], answer:0, ref:"2:282"},
  {q:"Which surah contains the verse ‚ÄòAnd kill not your children for fear of poverty‚Äô?", options:["Al-An‚Äòam 6:151","Al-Isra 17:31","Both A and B","Maryam 19:8"], answer:2, ref:"6:151; 17:31"},
  {q:"Which surah teaches: ‚ÄòAnd be not forgetful of excellence (ihsan) between you‚Äô?", options:["Al-Baqarah 2:237","An-Nisa 4:36","An-Nur 24:22","Al-Hashr 59:10"], answer:2, ref:"24:22"},
  {q:"Which surah contains: ‚ÄòAllah enjoins justice and the doing of good‚Ä¶‚Äô recited in Friday sermons?", options:["Al-Nahl 16:90","Al-Jumu‚Äòah 62:9","Al-Hajj 22:41","Al-Ma‚Äôidah 5:8"], answer:0, ref:"16:90"},
  {q:"Which surah mentions the she-camel as a divine sign in relation to Thamud?", options:["Hud 11","Ash-Shu‚Äòara 26","Ash-Shams 91:13","Al-Qamar 54"], answer:2, ref:"91:13"},
  {q:"Which surah declares the prohibition of usury (riba) most explicitly?", options:["Al-Baqarah 2:275-279","Al-Imran 3:130","Both A and B","An-Nisa 4:29"], answer:2, ref:"2:275-279; 3:130"},
  {q:"Which surah says, ‚ÄòPrayer is enjoined on the believers at fixed times‚Äô?", options:["Al-Baqarah 2:238","An-Nisa 4:103","Al-Isra 17:78","Al-Mu‚Äôminun 23:9"], answer:1, ref:"4:103"},
  {q:"Which surah contains the embryonic development description ‚Äòfrom a drop‚Ä¶ a clot‚Ä¶‚Äô?", options:["Al-Mu‚Äôminun 23:12-14","Al-‚ÄòAlaq 96:2","Both A and B","Al-Insan 76:2"], answer:2, ref:"23:12-14; 96:2"},
  {q:"Which surah contains the parable of the two gardens (wealthy man and his companion)?", options:["Al-Kahf 18","Al-Hashr 59","Al-Qalam 68","Al-Rahman 55"], answer:0, ref:"18:32-44"},
  {q:"Which surah includes: ‚ÄòDo not say ‚Äúuff‚Äù to them‚Äô regarding parents?", options:["Luqman 31:14","Al-Isra 17:23","Al-Ankabut 29:8","Al-Ahqaf 46:15"], answer:1, ref:"17:23"},
  {q:"Which surah states: ‚ÄòAnd do not commit excess; surely He loves not the excessive‚Äô?", options:["Al-Ma‚Äôidah 5:87","Al-A‚Äòraf 7:31","Al-Isra 17:26","Al-Furqan 25:67"], answer:1, ref:"7:31"},
  {q:"Which surah commands returning trusts and judging with justice?", options:["An-Nisa 4:58","Al-Ma‚Äôidah 5:8","Al-Hajj 22:41","Al-Shura 42:15"], answer:0, ref:"4:58"},
  {q:"Which surah declares: ‚ÄòAnd the male is not like the female‚Äô (spoken by the mother of Mary)?", options:["Al-Imran 3:36","Maryam 19:28","An-Nisa 4:1","Al-Ahzab 33:35"], answer:0, ref:"3:36"},
  {q:"Which surah proclaims: ‚ÄòO you who believe! Enter into peace wholly (silmi kaaffah)‚Äô?", options:["Al-Baqarah 2:208","Al-Imran 3:102","An-Nisa 4:125","Al-Mujadilah 58:22"], answer:0, ref:"2:208"},
  {q:"Which surah says: ‚ÄòAnd in their wealth was a share for the beggar and the deprived‚Äô?", options:["Al-Ma‚Äòarij 70:24-25","Ad-Dhariyat 51:19","Both A and B","Al-Hashr 59:9"], answer:2, ref:"70:24-25; 51:19"},
  {q:"Which surah contains the parable of ‚Äòa good word‚Ä¶ like a good tree‚Äô?", options:["Ibrahim 14:24-25","Al-Nur 24:35","Al-Baqarah 2:261","Al-Hashr 59:21"], answer:0, ref:"14:24-25"},
  {q:"Which surah warns against saying about Allah what you do not know?", options:["Al-A‚Äòraf 7:33","Al-Baqarah 2:80","Al-Imran 3:94","An-Nahl 16:116"], answer:3, ref:"16:116"},
  {q:"Which surah forbids ridicule, offensive nicknames, spying, and backbiting?", options:["Al-Nur 24","Al-Ahzab 33","Al-Hujurat 49:11-12","Al-Hashr 59"], answer:2, ref:"49:11-12"},
  {q:"Which surah declares: ‚ÄòWe sent a Messenger to every people‚Ä¶‚Äô?", options:["Al-Nahl 16:36","Fatir 35:24","Both A and B","Al-Anbiya 21:25"], answer:2, ref:"16:36; 35:24"},
  {q:"Which surah states: ‚ÄòAnd of His signs is that He created for you spouses that you may find tranquillity in them‚Äô?", options:["Al-Ahzab 33:35","Ar-Rum 30:21","An-Nisa 4:1","Al-Hujurat 49:13"], answer:1, ref:"30:21"},
  {q:"Which surah promises believers ‚ÄòHe will most surely make them Successors in the earth‚Äô (Ahmadiyya emphasis on Khilafat)?", options:["Ash-Shura 42:38","Al-Nur 24:55","Al-Hajj 22:41","Al-Fath 48:29"], answer:1, ref:"24:55"},
  {q:"Which surah contains ‚ÄòIf you love Allah, follow me; Allah will love you‚Ä¶‚Äô?", options:["Al-Imran 3:31","Al-Ahzab 33:21","Muhammad 47:33","Al-Hashr 59:7"], answer:0, ref:"3:31"},
  {q:"Which surah begins with ‚ÄòBlessed is He in Whose hand is the Kingdom‚Äô?", options:["Al-Mulk 67:1","Al-Furqan 25:1","Both A and B","Al-Isra 17:1"], answer:0, ref:"67:1"},
  {q:"Which surah contains the prayer of Solomon for a unique kingdom?", options:["An-Naml 27:19","Saba‚Äô 34:12","Sad 38:35","Al-Ahzab 33:27"], answer:2, ref:"38:35"},
  {q:"Which surah refers to Adam being taught the names of all things?", options:["Al-A‚Äòraf 7:19","Al-Baqarah 2:31","Al-Hijr 15:28","Ta-Ha 20:115"], answer:1, ref:"2:31"},
  {q:"Which surah contains ‚ÄòAnd despair not of the mercy of Allah‚Äô?", options:["Al-Zumar 39:53","Al-Shura 42:25","Al-Furqan 25:70","Al-Taghabun 64:14"], answer:0, ref:"39:53"},
  {q:"Which surah contains the command to verify news brought by a wicked person (tabayyun)?", options:["Al-Nur 24:15","Al-Ahzab 33:70","Al-Hujurat 49:6","Al-Mumtahanah 60:10"], answer:2, ref:"49:6"},
  {q:"Which surah contains the verse ‚ÄòTo you your religion and to me mine‚Äô?", options:["Al-Kafirun 109:6","Al-Baqarah 2:256","Yunus 10:41","Al-An‚Äòam 6:108"], answer:0, ref:"109:6"},
  {q:"Which surah mentions honey and its healing properties?", options:["Al-Nahl 16:69","Al-Rahman 55:68","Al-Waqi‚Äòah 56:68","Abasa 80:24"], answer:0, ref:"16:69"},
  {q:"Which surah states that Allah created the heavens and earth in six ‚Äòdays‚Äô (periods)?", options:["Al-A‚Äòraf 7:54","Yunus 10:3","Hud 11:7","All of the above"], answer:3, ref:""},
  {q:"Which surah contains the barrier of iron built by Dhu‚Äôl-Qarnayn?", options:["Maryam 19","Al-Kahf 18:96","Al-Anbiya 21","Al-Qasas 28"], answer:1, ref:"18:96"},
  {q:"Which surah includes the law of equitable retaliation (qisas): ‚Äòlife for life‚Ä¶‚Äô?", options:["Al-Ma‚Äôidah 5:45","Al-Baqarah 2:178","Both A and B","An-Nisa 4:92"], answer:2, ref:"5:45; 2:178"},
  {q:"Which surah explicitly allows fighting only in self-defence when persecuted (Ahmadiyya emphasis)?", options:["Al-Baqarah 2:190","Al-Hajj 22:39-40","Al-Taubah 9:36","Muhammad 47:4"], answer:1, ref:"22:39-40"},
  {q:"According to Ahmadiyya understanding, which verse indicates God gives glad tidings to the righteous in this life?", options:["Yunus 10:64","Al-Ahzab 33:40","Al-Ma‚Äôidah 5:3","Al-Shura 42:51"], answer:0, ref:"10:64"},
  {q:"Which surah declares the Prophet Muhammad (sa) to be ‚Äòa mercy for all peoples‚Äô?", options:["Al-Ahzab 33:56","Al-Anbiya 21:107","Al-Fath 48:29","Al-Qalam 68:4"], answer:1, ref:"21:107"}
];

// --- State & helpers ---
const state = {
  i: 0,
  answers: Array(QUESTIONS.length).fill(null), // chosen index or null
  score: 0
};

const $ = sel => document.querySelector(sel);
const quizEl = $('#quiz');
const barEl = $('#bar');
const progressText = $('#progressText');
const resetBtn = $('#resetBtn');

// Persist state in localStorage
function save(){
  localStorage.setItem('quran_quiz_state', JSON.stringify(state));
}
function load(){
  const raw = localStorage.getItem('quran_quiz_state');
  if(!raw) return;
  try{
    const obj = JSON.parse(raw);
    if(Array.isArray(obj.answers) && typeof obj.i === 'number' && typeof obj.score === 'number'){
      state.i = Math.min(Math.max(0, obj.i), QUESTIONS.length-1);
      state.answers = obj.answers.slice(0, QUESTIONS.length);
      state.score = obj.score|0;
    }
  }catch{ /* ignore */ }
}

resetBtn.addEventListener('click', ()=>{
  if(!confirm('Start over? Your progress will be cleared.')) return;
  state.i = 0; state.answers = Array(QUESTIONS.length).fill(null); state.score = 0; save(); render();
});

function render(){
  const total = QUESTIONS.length;
  const q = QUESTIONS[state.i];
  const chosen = state.answers[state.i];

  // progress
  const percent = ((state.i)/ (total)) * 100;
  barEl.style.width = `${Math.max(4, percent)}%`;
  progressText.textContent = `Question ${state.i+1} / ${total}`;

  // question card
  quizEl.innerHTML = '';
  const qno = document.createElement('div'); qno.className='qno'; qno.textContent = `Q${state.i+1}`;
  const qt = document.createElement('div'); qt.className='question'; qt.textContent = q.q;

  const choices = document.createElement('div'); choices.className='choices';
  q.options.forEach((opt, idx)=>{
    const btn = document.createElement('button');
    btn.className = 'choice'; btn.type='button'; btn.setAttribute('aria-pressed','false');
    if(chosen!==null){ btn.classList.add('disabled'); }

    const label = document.createElement('div'); label.className='label'; label.textContent= String.fromCharCode(65+idx);
    const span = document.createElement('div'); span.style.fontWeight='700'; span.style.lineHeight='1.25'; span.textContent = opt;
    btn.appendChild(label); btn.appendChild(span);

    if(chosen!==null){
      if(idx === q.answer) btn.classList.add('correct');
      if(idx === chosen && chosen !== q.answer) btn.classList.add('wrong');
    }

    btn.addEventListener('click', ()=> onChoose(idx));
    choices.appendChild(btn);
  });

  quizEl.appendChild(qno);
  quizEl.appendChild(qt);
  quizEl.appendChild(choices);

  // feedback
  const fb = document.createElement('div');
  if(chosen!==null){
    const right = chosen === q.answer;
    const badge = document.createElement('div');
    badge.className = 'badge ' + (right? 'right':'wrong');
    badge.innerHTML = right ? '‚úÖ Correct!' : '‚ùå Not quite';
    fb.appendChild(badge);

    const answerLine = document.createElement('div');
    const correctText = `${String.fromCharCode(65+q.answer)}. ${q.options[q.answer]}`;
    answerLine.className = 'answerline';
    answerLine.innerHTML = `Correct answer: <span class="correctText">${correctText}</span>`;
    fb.appendChild(answerLine);

    if(q.ref){
      const ref = document.createElement('div'); ref.className='ref'; ref.textContent = `Ref: ${q.ref}`; fb.appendChild(ref);
    }
  } else {
    const hint = document.createElement('div'); hint.className='tiny'; hint.textContent = 'Tap an option to check your answer.'; fb.appendChild(hint);
  }
  quizEl.appendChild(fb);

  const row = document.createElement('div'); row.className='row';
  const prev = document.createElement('button'); prev.className='btn ghost'; prev.textContent='‚óÄ Previous'; prev.disabled = state.i===0; prev.onclick=()=>{state.i--; save(); render();};
  const next = document.createElement('button'); next.className='btn primary'; next.textContent = (state.i === total-1 ? 'See results ‚ñ∂' : 'Next ‚ñ∂'); next.disabled = (chosen===null); next.onclick=()=>{
    if(state.i === total-1){ showResults(); } else { state.i++; save(); render(); }
  };
  row.appendChild(prev); row.appendChild(next);
  quizEl.appendChild(row);
}

function onChoose(idx){
  const q = QUESTIONS[state.i];
  if(state.answers[state.i]!==null) return; // already answered
  state.answers[state.i] = idx;
  if(idx === q.answer) state.score++;
  save();
  render(); // re-render to show feedback
}

function showResults(){
  const total = QUESTIONS.length;
  const correct = state.score;
  const wrong = total - correct;
  const pct = Math.round((correct/total)*100);

  // build results view
  quizEl.innerHTML = '';
  const h = document.createElement('div'); h.className='score'; h.textContent = `Your score: ${correct} / ${total} (${pct}%)`;
  const sub = document.createElement('div'); sub.className='subtitle'; sub.innerHTML = (pct>=80? 'Awesome job! üèÜ':'Nice effort! Keep practising. üåü');

  // quick summary bars
  const bars = document.createElement('div'); bars.className='row';
  const good = document.createElement('div'); good.className='badge right'; good.textContent = `‚úîÔ∏è Correct: ${correct}`;
  const bad = document.createElement('div'); bad.className='badge wrong'; bad.textContent = `‚úñÔ∏è Incorrect: ${wrong}`;
  bars.appendChild(good); bars.appendChild(bad);

  const again = document.createElement('button'); again.className='btn success'; again.textContent='Play again';
  again.onclick = ()=>{ state.i=0; state.answers = Array(total).fill(null); state.score=0; save(); render(); };

  quizEl.appendChild(h); quizEl.appendChild(sub); quizEl.appendChild(bars);

  // Review list of mistakes
  const mistakes = state.answers.map((a,i)=>({i, a, q:QUESTIONS[i]})).filter(x=>x.a !== x.q.answer);
  if(mistakes.length){
    const h2 = document.createElement('div'); h2.style.fontWeight='900'; h2.style.marginTop='16px'; h2.textContent = 'Review your tricky ones:';
    quizEl.appendChild(h2);
    const grid = document.createElement('div'); grid.className='grid';
    mistakes.forEach(m=>{
      const c = document.createElement('div'); c.className='card review';
      const tt = document.createElement('div'); tt.style.fontWeight='800'; tt.style.marginBottom='6px'; tt.textContent = `Q${m.i+1}. ${m.q.q}`;
      const you = document.createElement('div'); you.className='wrongText'; you.textContent = `Your answer: ${m.a===null? '‚Äî' : String.fromCharCode(65+m.a)+'. '+m.q.options[m.a]}`;
      const cor = document.createElement('div'); cor.className='correctText'; cor.textContent = `Correct: ${String.fromCharCode(65+m.q.answer)}. ${m.q.options[m.q.answer]}`;
      c.appendChild(tt); c.appendChild(you); c.appendChild(cor);
      if(m.q.ref){ const r=document.createElement('div'); r.className='ref'; r.textContent='Ref: '+m.q.ref; c.appendChild(r);}
      grid.appendChild(c);
    });
    quizEl.appendChild(grid);
  }

  const row = document.createElement('div'); row.className='row'; row.style.marginTop='16px';
  const prevBtn = document.createElement('button'); prevBtn.className='btn ghost'; prevBtn.textContent='Back to last question'; prevBtn.onclick=()=>{ state.i = QUESTIONS.length-1; save(); render(); };
  row.appendChild(again); row.appendChild(prevBtn);
  quizEl.appendChild(row);
}

// Initialise
load();
render();
</script>
</body>
</html>
